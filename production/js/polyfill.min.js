var a=a=>typeof a=='function';(function(A,b){typeof exports=='object'&&module!==void 0?b():typeof define=='function'&&define.amd?define(b):b()})(this,function(...args){function A(_){var B=this.constructor;return this.then(function(C){return B.resolve(_()).then(()=>C)},function(C){return B.resolve(_()).then(()=>B.reject(C))})}function b(_){var P=this;return new P(function(B,C){if(!(_&&_.length!==void 0))return C(TypeError(typeof _+' '+_+' is not iterable(cannot read property Symbol(Symbol.iterator))'));var _c=Array.prototype.slice.call(_),D=_c.length;if(!_c.length)return B([]);function E(i,_b){if(_b&&(typeof _b=='object'||a(_b))){var _C=_b.then;if(a(_C)){_C.call(_b,function(_a){E(i,_a)},function(e){_c[i]={status:'rejected',reason:e};!--D&&B(_c)});return}}_c[i]={status:'fulfilled',value:_b};!--D&&B(_c)}for(var i=0;i<_c.length;i++)E(i,_c[i])})}var c=setTimeout,n=(function(){if(self!==void 0)return self;if(window!==void 0)return window;if(global!==void 0)return global;throw Error('unable to locate global object')})();function d(x){return!!x&&x.length!==void 0}function e(){}function f(_,B){return()=>_.apply(B,args)}function g(_){if(!(this instanceof g))throw TypeError('Promises must be constructed via new');if(typeof _!=='function')throw TypeError('not a function');this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];m(_,this)}function h(_,B){while (_._state==3)_=_._value;if(!_._state){_._deferreds.push(B);return}_._handled=!0;g._immediateFn(()=>{var C=_._state==1?B.onFulfilled:B.onRejected,_b;if(C==null){_._state==1?i:j(B.promise,_._value);return}try {_b=C(_._value)} catch (e) {j(B.promise,e);return}i(B.promise,_b)})}function i(_,B){try {if(B==_)throw TypeError('A promise cannot be resolved with itself.');if(B&&(typeof B=='object'||a(B))){var C=B.then;if(B instanceof g){_._state=3;_._value=B;k(_);return}if(a(C)){m(f(C,B),_);return}}_._state=1;_._value=B;k(_)} catch (e) {j(_,e)}}function j(_,B){_._state=2;_._value=B;k(_)}function k(_){_._state==2&&!_._deferreds.length&&g._immediateFn(()=>{if(!_._handled)g._unhandledRejectionFn(_._value)});for(var i=0,B=_._deferreds.length;i<B;i++)h(_,_._deferreds[i]);_._deferreds=null}function l(_,B,C){this.onFulfilled=a(_)?_:null;this.onRejected=a(B)?B:null;this.promise=C}function m(_,B){var C=!1;try {_(function(_a){if(C)return;C=!0;i(B,_a)},function(_a){if(C)return;C=!0;j(B,_a)})} catch (_a) {if(C)return;C=!0;j(B,_a)}}g.prototype['catch']=function(_){return this.then(null,_)};g.prototype.then=function(_,B){var C=new this.constructor(e);h(this,new l(_, B, C));return C};g.prototype['finally']=A;g.all=arr=>new g(function(_,B){if(!d(arr))return B(TypeError('Promise.all accepts an array'));var C=Array.prototype.slice.call(arr),D=C.length;if(!C.length)return _([]);function E(i,_b){try {if(_b&&(typeof _b=='object'||a(_b))){var _c=_b.then;if(a(_c)){_c.call(_b,function(_a){E(i,_a)},B);return}}C[i]=_b;!--D&&_(C)} catch (_a) {B(_a)}}for(var i=0;i<C.length;i++)E(i,C[i])});g.allSettled=b;g.resolve=_=>{if(_&&typeof _=='object'&&_.constructor==g)return _;return new g(function(B){B(_)})};g.reject=value=>new g(function(_,B){B(value)});g.race=arr=>new g(function(_,B){if(!d(arr))return B(TypeError('Promise.race accepts an array'));for(var i=0,D=arr.length;i<D;i++)g.resolve(arr[i]).then(_,B)});g._immediateFn=(typeof setImmediate=='function'&&function(_){setImmediate(_)})||function(_){c(_,0)};g._unhandledRejectionFn=function B(_){console!==void 0&&console&&console.warn('Possible Unhandled Promise Rejection:',_)};if(typeof n['Promise']!=='function')n['Promise']=g;else{!n.Promise.prototype['finally']&&(n.Promise.prototype['finally']=A);!n.Promise.allSettled&&(n.Promise.allSettled=b)}});
